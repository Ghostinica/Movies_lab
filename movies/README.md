# Фильмы

Мобильное приложение для каталогизации и учёта фильмов. Позволяет просматривать каталог из API, искать фильмы по названию и раскладывать их по своим категориям (просмотренное, избранное и др.).

## Технологии

- **Flutter** (SDK ^3.10.8)
- **Material 3** — современный интерфейс
- **API**: [poiskkino.dev](https://api.poiskkino.dev) v1.4 (каталог и поиск фильмов)

## Функции

### Главный экран (каталог)

- Прокручиваемый список фильмов из API с постером, названием, годом, жанром, страной и рейтингами (КП, IMDB).
- Подгрузка следующих страниц при прокрутке вниз (бесконечный скролл).
- Обновление списка жестом «потянуть вниз» (pull-to-refresh).

### Поиск

- Поиск фильмов по названию через API.
- **Недавние запросы** — при фокусе в поле поиска показываются последние 5 запросов; по нажатию выполняется поиск по выбранному запросу.
- Кнопка **«Очистить»** — полная очистка истории поиска.

### Карточка фильма

- Подробная информация: постер, название, год, жанр, страна, рейтинги КП и IMDB, продолжительность, описание.
- **Добавление в категории**.

### Мои категории

- **Стандартные**: «Просмотренное», «Избранное», «Понравившиеся».
- **Свои категории** — создание новых с выбором иконки из набора.
- В каждой категории — список фильмов; переход в карточку фильма, удаление из категории.

### Навигация

- **AppBar** — заголовок «Фильмы».
- **Боковое меню (Drawer)** — пункты «Каталог фильмов» и «Мои категории».

### Сохранение данных

- Локальные фильмы (добавленные пользователем).
- Состав категорий и привязка фильмов к ним.
- Кэш данных фильмов из API для отображения в категориях.
- Свои категории и их иконки.
- История поиска (последние 5 запросов).

Всё перечисленное хранится в **SharedPreferences** и восстанавливается при следующем запуске.

## Структура проекта

```
lib/
├── main.dart                 # Точка входа, тема приложения
├── app_state.dart           # Состояние приложения (ChangeNotifier)
├── app_state_scope.dart     # Передача AppState по дереву виджетов
├── data/
│   ├── api/                 # Запросы к API poiskkino
│   ├── dto/                 # Модели ответов API
│   ├── local/               # SharedPreferences
│   └── repository/          # Слой репозитория (API + локальное хранилище)
├── models/                  # Модели: Movie, MovieItem
├── screens/                 # Экраны: главный, карточка фильма, категории
└── utils/                   # Утилиты (иконки категорий)
```

## Запуск

1. Установить зависимости:
   ```bash
   flutter pub get
   ```

2. Запустить приложение:
   ```bash
   flutter run
   ```

Для работы каталога и поиска нужен доступ в интернет. API-ключ задаётся в `lib/main.dart`.
